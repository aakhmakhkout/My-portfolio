<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="voting.css" />
  </head>
  <body>
    <nav>
      <div class="name">
        <h1>Online Voting System</h1>
      </div>
      <div class="nav-links">
        <ul>
          <li><a href="#home">Home</a></li>
          <li><a href="/voting/index.html">Voting</a></li>
          <li><a href="#about">About Us</a></li>
          <li><a href="#contact">Contact Us</a></li>
        </ul>
      </div>
    </nav>

    <main>
      <div class="steps">
        <h3>Some instructions for voting</h3>
        <ul>
          <li>You must be above or equal to 18</li>
          <li>You should have voter ID</li>
          <li>You can't select more than one party</li>
          <li>You can't vote more than one time</li>
        </ul>
        <h3>Voting Steps :</h3>
        <ul>
          <li>First enter your voter ID</li>
          <li>Then select the party of your choice</li>
          <li>And vote for that party</li>
        </ul>
      </div>

      <div class="v-img">
        <img src="/images/img2.png" alt="v-png" />
      </div>
    </main>

    <span
      style="
        width: 100%;
        display: flex;
        justify-content: center;
        margin: 50px 0px;
      "
    >
      <hr style="width: 90%" />
    </span>

    <section class="parties-sec">
      <h4>Your Selected Parties Are</h4>
      <ul>
        <li id="p1"></li>
        <li id="p2"></li>
        <li id="p3"></li>
      </ul>
    </section>

    <section class="v-sec">
      <div class="v-form">
        <h5>Vote Here</h5>
        <form>
          <label for="v-ID">Enter your voter ID</label>
          <input
            type="text"
            name="v-id"
            id="v-ID"
            required
            autocomplete="off"
            placeholder="eg. 7004****1234"
            class="inp"
          />

          <label for="v-par" class="p-n" id="par-label"
            >Select your party</label
          >
          <input
            type="text"
            name="v-par"
            id="v-par"
            required
            autocomplete="off"
            placeholder="Party name"
            class="inp par-name"
          />

          <input
            type="reset"
            value="Reset"
            class="bttn"
            id="inp-ut"
            onclick="resetvalue()"
          />
        </form>

        <button onclick="checkVoterId()" class="bttn" id="n-btn">Next</button>

        <button class="bttn" id="v-btn" onclick="voteParty();resetval()">
          Vote
        </button>

        <p id="v-result"></p>
        <p id="p-results"></p>
      </div>
    </section>

    <script src="/app.js"></script>
    <script>
      window.onload = function () {
        var value1 = localStorage.getItem("myValue1");
        var value2 = localStorage.getItem("myValue2");
        var value3 = localStorage.getItem("myValue3");

        var output1 = document.getElementById("p1");
        output1.innerText = value1;

        var output2 = document.getElementById("p2");
        output2.innerText = value2;

        var output3 = document.getElementById("p3");
        output3.innerText = value3;
      };

      function checkVoterId() {
        var mylabel = document.getElementById("par-label");
        var myinput = document.getElementById("v-par");
        var voteBtn = document.getElementById("v-btn");
        var nextBtn = document.getElementById("n-btn");

        let voters = [101, 102, 103, 104, 105];
        let x;
        let val;
        let votes = 10;

        let vid = document.getElementById("v-ID");
        let voterid = vid.value;
        voterid = parseInt(voterid);

        for (let i = 0; i < 5; i++) {
          if (voterid === voters[i]) {
            val = voters[i];
            x = true;
          }
        }

        if (x == true) {
          mylabel.style.display = "block";
          myinput.style.display = "block";
          voteBtn.style.display = "block";
          nextBtn.style.display = "none";
          return (document.getElementById("v-result").innerHTML =
            val + " is a varified voter ID");
        } else {
          mylabel.style.display = "none";
          myinput.style.display = "none";
          voteBtn.style.display = "none";
          nextBtn.style.display = "none";
          return (document.getElementById("v-result").innerHTML =
            voterid + " is an invalid voter Id");
        }
      }

      function resetvalue() {
        var mylabel = document.getElementById("par-label");
        var myinput = document.getElementById("v-par");
        var voteBtn = document.getElementById("v-btn");
        var nextBtn = document.getElementById("n-btn");

        mylabel.style.display = "none";
        myinput.style.display = "none";
        voteBtn.style.display = "none";
        nextBtn.style.display = "block";

        document.getElementById("v-result").innerHTML = "";
        document.getElementById("p-results").innerHTML = "";
      }

      function resetval() {
        var mylabel = document.getElementById("par-label");
        var myinput = document.getElementById("v-par");
        var voteBtn = document.getElementById("v-btn");

        mylabel.style.display = "none";
        myinput.style.display = "none";
        voteBtn.style.display = "none";

        document.getElementById("v-result").innerHTML = "";
      }

      function voteParty() {
        var value4 = localStorage.getItem("myValue1");
        let vValue4 = value4.toUpperCase();

        var value5 = localStorage.getItem("myValue2");
        let vValue5 = value5.toUpperCase();

        var value6 = localStorage.getItem("myValue3");
        let vValue6 = value6.toUpperCase();

        let party1 = 1;
        let party2 = 2;
        let party3 = 3;

        var vPartyValue1;
        var vPartyValue2;
        var vPartyValue3;

        let vVal = document.getElementById("v-par");
        let vValue = vVal.value;

        let VValue = vValue.toUpperCase();

        if (VValue === vValue4) {
          party1 = party1 + 1;
          localStorage.setItem("vParty1", party1);
          vPartyValue1 = localStorage.getItem("vParty1");
          return (document.getElementById("p-results").innerHTML =
            "Thanks for Voting" + vPartyValue1);
        } else if (VValue === vValue5) {
          party2 = party2 + 1;
          localStorage.setItem("vParty2", party2);
          vPartyValue2 = localStorage.getItem("vParty2");
          return (document.getElementById("p-results").innerHTML =
            "thanks for voting" + vPartyValue2);
        } else if (VValue === vValue6) {
          party3 = party3 + 1;
          localStorage.setItem("vParty3", party3);
          vPartyValue3 = localStorage.getItem("vParty3");
          return (document.getElementById("p-results").innerHTML =
            "thanks for voting" + vPartyValue3);
        } else {
          return (document.getElementById("p-results").innerHTML =
            "Invalid party!");
        }
      }
    </script>
  </body>
</html>
